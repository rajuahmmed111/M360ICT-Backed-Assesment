generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ---------------------------------------------------------
//  ENUMS
// ---------------------------------------------------------

enum UserStatus {
  ACTIVE
  INACTIVE
  REJECTED
}

// ---------------------------------------------------------
//  MODELS
// ---------------------------------------------------------

model HrUser {
  id           String     @id @default(uuid())
  email        String     @unique
  passwordHash String
  name         String
  status       UserStatus @default(ACTIVE)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt

  @@map("hr_users")
}

model Employee {
  id          String    @id @default(uuid())
  name        String
  age         Int
  designation String
  hiringDate  DateTime
  dateOfBirth DateTime
  salary      Decimal   @db.Decimal(10, 2)
  photoPath   String?
  deletedAt   DateTime? // optional soft delete
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  // relationship
  attendances Attendance[]

  @@map("employees")
}

model Attendance {
  id          String   @id @default(uuid())
  date        DateTime @db.Date
  checkInTime DateTime @db.Time
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // relationship
  employeeId String
  employee   Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  @@unique([employeeId, date])
  @@map("attendance")
}
